# ğŸ“¦ éƒ¨ç½²è¯´æ˜æ–‡æ¡£

> ğŸ“š **æ–‡æ¡£å¯¼èˆª**: æŸ¥çœ‹ [éƒ¨ç½²æ–‡æ¡£ç´¢å¼•.md](./éƒ¨ç½²æ–‡æ¡£ç´¢å¼•.md) äº†è§£æ‰€æœ‰éƒ¨ç½²æ–¹å¼

## ğŸ¯ éƒ¨ç½²æ–¹å¼æ¦‚è§ˆ

| éƒ¨ç½²æ–¹å¼ | é€‚ç”¨åœºæ™¯ | éš¾åº¦ | æ–‡æ¡£ä½ç½® |
|---------|---------|------|---------|
| **è‡ªå®šä¹‰æœåŠ¡å™¨** | ç”Ÿäº§ç¯å¢ƒã€å†…ç½‘éƒ¨ç½² | â­â­ | æœ¬æ–‡æ¡£ |
| **GitHub Pages** | æ¼”ç¤ºã€å…¬å¼€è®¿é—® | â­â­â­ | [README_DEPLOYMENT.md](./README_DEPLOYMENT.md) |
| **Docker** | å®¹å™¨åŒ–éƒ¨ç½² | â­â­ | æœ¬æ–‡æ¡£ Docker éƒ¨åˆ† |
| **Cloudflare Worker** | API ä»£ç† | â­ | [å¿«é€Ÿéƒ¨ç½²CloudflareWorker.md](./å¿«é€Ÿéƒ¨ç½²CloudflareWorker.md) |

---

## ğŸš€ è‡ªå®šä¹‰æœåŠ¡å™¨éƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

### ç›®æ ‡æœåŠ¡å™¨
- åœ°å€: `http://47.94.146.148:8888/`
- ç«¯å£: `8888`

### å¿«é€Ÿéƒ¨ç½²

#### Windows ç³»ç»Ÿ

**æ–¹å¼ 1: ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ï¼ˆæ¨èï¼‰**
```bash
.\scripts\éƒ¨ç½²åˆ°æœåŠ¡å™¨.bat
```

**æ–¹å¼ 2: ä½¿ç”¨ PowerShell è„šæœ¬**
```powershell
.\scripts\éƒ¨ç½²åˆ°æœåŠ¡å™¨.ps1
```

#### Linux/Mac ç³»ç»Ÿ

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. æ„å»ºé¡¹ç›®
npm run build

# 3. å¯åŠ¨æœåŠ¡å™¨
PORT=8888 node server.js
```

## æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤

### 1. å®‰è£…ä¾èµ–
```bash
npm install
```

### 2. æ„å»ºé¡¹ç›®
```bash
npm run build
```

### 3. å¯åŠ¨æœåŠ¡å™¨

#### æ–¹å¼ 1: ä½¿ç”¨ Node.js server.js
```bash
PORT=8888 node server.js
```

#### æ–¹å¼ 2: ä½¿ç”¨ Docker
```bash
cd docker
# ä¿®æ”¹ docker-compose.yml ä¸­çš„ç«¯å£æ˜ å°„ä¸º 8888:80
docker-compose build
docker-compose up -d
```

#### æ–¹å¼ 3: ä½¿ç”¨ Nginx
```bash
# å°† dist ç›®å½•å†…å®¹å¤åˆ¶åˆ° Nginx ç½‘ç«™æ ¹ç›®å½•
sudo cp -r dist/* /var/www/html/

# é…ç½® Nginx (ç¤ºä¾‹)
sudo nano /etc/nginx/sites-available/smart-qa
```

Nginx é…ç½®ç¤ºä¾‹ï¼š
```nginx
server {
    listen 8888;
    server_name 47.94.146.148;
    
    root /var/www/html;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    location /api/deepseek {
        proxy_pass https://api.deepseek.com;
        proxy_set_header Host api.deepseek.com;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

## éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨

### ä½¿ç”¨ SCP ä¸Šä¼ 
```bash
# 1. æ‰“åŒ… dist ç›®å½•
tar -czf dist.tar.gz dist/

# 2. ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp dist.tar.gz root@47.94.146.148:/var/www/smart-qa/

# 3. SSH ç™»å½•æœåŠ¡å™¨
ssh root@47.94.146.148

# 4. è§£å‹å¹¶å¯åŠ¨
cd /var/www/smart-qa
tar -xzf dist.tar.gz
PORT=8888 node server.js
```

### ä½¿ç”¨ Git éƒ¨ç½²
```bash
# åœ¨æœåŠ¡å™¨ä¸Š
git clone <your-repo-url>
cd smart-qa
npm install
npm run build
PORT=8888 node server.js
```

## ä½¿ç”¨ PM2 ç®¡ç†è¿›ç¨‹ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

```bash
# å®‰è£… PM2
npm install -g pm2

# å¯åŠ¨åº”ç”¨
pm2 start server.js --name smart-qa -- --port 8888

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs smart-qa

# é‡å¯
pm2 restart smart-qa

# åœæ­¢
pm2 stop smart-qa
```

## ç¯å¢ƒå˜é‡é…ç½®

### DeepSeek API Key
å¦‚æœéœ€è¦ä¿®æ”¹ API Keyï¼Œå¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
export DEEPSEEK_API_KEY=your-api-key
PORT=8888 node server.js
```

æˆ–è€…åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ï¼š
```
DEEPSEEK_API_KEY=your-api-key
PORT=8888
```

## é˜²ç«å¢™é…ç½®

### Linux (iptables)
```bash
sudo iptables -A INPUT -p tcp --dport 8888 -j ACCEPT
sudo iptables-save
```

### Linux (ufw)
```bash
sudo ufw allow 8888/tcp
```

### Windows
```powershell
netsh advfirewall firewall add rule name="Smart QA Server" dir=in action=allow protocol=TCP localport=8888
```

## éªŒè¯éƒ¨ç½²

1. è®¿é—® `http://47.94.146.148:8888/`
2. æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½
3. æµ‹è¯• API åŠŸèƒ½æ˜¯å¦æ­£å¸¸

---

## ğŸŒ GitHub Pages éƒ¨ç½²

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ï¼š[README_DEPLOYMENT.md](./README_DEPLOYMENT.md)

### å¿«é€Ÿæ­¥éª¤
1. é…ç½® GitHub Secretsï¼š`VITE_DEEPSEEK_API_KEY`
2. æ¨é€ä»£ç åˆ° `main` åˆ†æ”¯
3. GitHub Actions è‡ªåŠ¨éƒ¨ç½²
4. è®¿é—®ï¼š`https://mm1025048717-hash.github.io/smart-qa-v2.0/`

### âš ï¸ CORS é—®é¢˜å¤„ç†
GitHub Pages éƒ¨ç½²éœ€è¦é…ç½® Cloudflare Worker ä»£ç†ï¼Œè¯¦è§ï¼š[å¿«é€Ÿéƒ¨ç½²CloudflareWorker.md](./å¿«é€Ÿéƒ¨ç½²CloudflareWorker.md)

---

## ğŸ³ Docker éƒ¨ç½²

## å¸¸è§é—®é¢˜

### 1. ç«¯å£è¢«å ç”¨
```bash
# Linux/Mac æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :8888
# æˆ–
netstat -tulpn | grep 8888

# Windows æŸ¥çœ‹ç«¯å£å ç”¨
netstat -ano | findstr :8888
```

### 2. æ„å»ºå¤±è´¥
- æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼ˆå»ºè®® 18+ï¼‰
- æ¸…é™¤ç¼“å­˜ï¼š`rm -rf node_modules package-lock.json && npm install`
- æ£€æŸ¥ç£ç›˜ç©ºé—´

### 3. API è¯·æ±‚å¤±è´¥
- æ£€æŸ¥ `server.js` ä¸­çš„ API Key é…ç½®
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—

### 4. é™æ€èµ„æº 404
- æ£€æŸ¥ `vite.config.ts` ä¸­çš„ `base` é…ç½®ï¼ˆåº”ä¸º `/`ï¼‰
- æ£€æŸ¥ Nginx é…ç½®ä¸­çš„ `try_files` è®¾ç½®

## æ›´æ–°éƒ¨ç½²

```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull

# 2. é‡æ–°æ„å»º
npm run build

# 3. é‡å¯æœåŠ¡
pm2 restart smart-qa
# æˆ–
PORT=8888 node server.js
```

## å›æ»š

```bash
# ä½¿ç”¨ Git å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
git checkout <previous-commit-hash>
npm run build
pm2 restart smart-qa
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [éƒ¨ç½²æ–‡æ¡£ç´¢å¼•.md](./éƒ¨ç½²æ–‡æ¡£ç´¢å¼•.md) - æ‰€æœ‰éƒ¨ç½²æ–¹å¼å¯¼èˆª
- [å¿«é€Ÿéƒ¨ç½²æŒ‡å—.md](./å¿«é€Ÿéƒ¨ç½²æŒ‡å—.md) - å¿«é€Ÿå‚è€ƒ
- [README_DEPLOYMENT.md](./README_DEPLOYMENT.md) - GitHub Pages éƒ¨ç½²
- [å¿«é€Ÿéƒ¨ç½²CloudflareWorker.md](./å¿«é€Ÿéƒ¨ç½²CloudflareWorker.md) - Cloudflare Worker ä»£ç†

