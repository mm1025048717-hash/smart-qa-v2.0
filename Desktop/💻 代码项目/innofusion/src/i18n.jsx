import React, { createContext, useContext, useMemo, useState, useEffect } from 'react';

const I18nContext = createContext({
	lang: 'zh',
	setLang: () => {},
	t: (key) => key,
});

const translations = {
	zh: {
		// Site (官网)
		'site.brand': 'innofusion',
		'site.nav.why': '为什么',
		'site.nav.gallery': '案例',
		'site.nav.pricing': '定价',
		'site.nav.customers': '客户',
		'site.nav.about': '关于',
		'site.nav.launch': '进入应用',
		'site.hero.badge': 'AI 驱动 · 创意工作台',
		'site.hero.title': 'AI 一体化工作台',
		'site.hero.sub': '灵感融合，方案自成。',
		'site.hero.try': '立即体验',
		'site.hero.demo': '观看演示',
		'site.nav.features': '功能',
		'site.nav.showcase': '演示',
		'site.nav.solutions': '方案',
		'site.nav.customers': '客户',
		'site.nav.about': '关于',
		'site.nav.why': '为何选择',
		'site.nav.gallery': '作品',
		'site.nav.pricing': '定价',
		'site.why.badge': '为何选择 INNOFUSION',
		'site.why.title': '从想法到图像、视频、文稿与计划，一体化完成。',
		'site.feature1.title': '给出想法，其他交给我们',
		'site.feature1.desc': '像真正的设计师一样进行规划与探索：自动匹配工具、梳理方向，将零散设想转化为可执行产物。',
		'site.feature1.bullet1': '提示词助手：一句话就能明确风格/目标/限制',
		'site.feature1.bullet2': '思路导图：自动拆解路径与里程碑',
		'site.feature1.bullet3': '一键草图：先出骨架，再细化到组件与版式',
		'site.feature1.cta': '开始构思',
		'site.feature2.title': '同一画布，共享智能',
		'site.feature2.desc': '在画布上标注要点、留下备注、勾勒框架；系统读取意图并与成员协同，沉淀可复用资产。',
		'site.feature2.bullet1': '多人并行：评论/引用/版本对比',
		'site.feature2.bullet2': '知识库联动：自动引用过往素材与规范',
		'site.feature2.bullet3': '可追溯：每次变更都能回滚与复盘',
		'site.feature2.cta': '开启协作',
		'site.feature3.title': '所有格式，一处完成',
		'site.feature3.desc': '从图片、视频到简报与落地页，产物按模板即时生成；导出、分享与交付零阻力。',
		'site.feature3.bullet1': '图片/视频/Markdown/PPT/HTML 多格式输出',
		'site.feature3.bullet2': '一键适配平台尺寸与封面规范',
		'site.feature3.bullet3': '导出链接：随时分享、权限可控',
		'site.feature3.cta': '立刻生成',
		'site.gallery.title': '看见创作过程',
		'site.gallery.sub': '探索由我们充满活力的社区制作的鼓舞人心的项目、艺术品和设计。',
		'site.gallery.item1.title': '灵感融合',
		'site.gallery.item2.title': '结构化输出',
		'site.gallery.item3.title': '风格探索',
		'site.gallery.item4.title': '方案生成',
		'site.testimonials.title': '来自社区的喜爱',
		'site.pricing.title': '灵活的计划满足不同需求',
		'site.pricing.sub': '为各种规模的团队提供灵活的计划',
		'site.pricing.perMonth': '月',
		'site.pricing.plan.starter': '入门版',
		'site.pricing.plan.team': '团队版',
		'site.pricing.plan.pro': '专业版',
		'site.pricing.cta': '开始使用',
		'site.cta.title': '从今天开始，把灵感变成可复用的资产',
		'site.cta.sub': '无需培训，上手即用；也可与现有流程无缝对接',
		'site.cta.workbench': '进入工作台',
		'site.cta.try': '免费试用',
		'site.testimonials.title': '来自社区的赞誉',
		'site.testimonials.item1.name': '李静',
		'site.testimonials.item1.role': '资深营销策略师',
		'site.testimonials.item1.quote': 'innofusion 彻底改变了我们的头脑风暴会。过去，各种灵感散乱无章，现在通过气泡化融合，能快速梳理并生成一份逻辑清晰的营销方案框架。这是从 0 到 0.1 的惊人提效。',
		'site.testimonials.item2.name': 'Alex Chen',
		'site.testimonials.item2.role': '独立开发者 & 产品经理',
		'site.testimonials.item2.quote': '对于需要快速验证想法的独立开发者来说，innofusion 是个宝藏。它把脑海中模糊的概念可视化，并帮你结构化成可执行的步骤。从一个点子到一份产品路线图，从未如此直观和高效。',
		'site.testimonials.item3.name': '张伟',
		'site.testimonials.item3.role': '创意总监 | XYZ 广告',
		'site.testimonials.item3.quote': '我们团队用 innofusion 来进行创意共创。它不仅让灵感的碰撞更自由，更重要的是，「融合」的过程本身就在凝聚团队共识。最终导出的方案骨架，让每个人都对目标一目了然。',
		'site.culture.title': '企业文化与品牌故事',
		'site.culture.vision': '愿景：让每一次合作都更高效、更具创造力',
		'site.culture.mission': '使命：把“研究—创意—执行”整合在一个空间，沉淀可复用的创意资产',
		'site.culture.values': '价值观：用户价值优先｜实用第一｜透明协作｜持续迭代',
		'site.culture.story': 'innofusion 起源于创意团队在「信息分散、沟通反复、产出不可复用」中的真实痛点。我们把交互画布、AI 搜索与智能 Agent 结合，形成从洞察到方案的一体化工作台。',
		'site.founder.name': '陈宣任',
		'site.founder.role': 'innofusion 创始人 & 产品负责人',
		'site.founder.quote': '创意不是缺少灵感，而是缺少“成型器”。我希望用更直观的表达（气泡）与可组合的结构（融合），把灵感的火花，变成能直接过会的策划书。',
		'site.founder.card_desc': 'AI+BI 产品经理，0→1 孵化 innofusion，提出“气泡化输入 × 气泡融合”方法论，专注把零散灵感转化为可交付的营销方案。',
		'site.founder.desc': 'AI+BI 产品经理出身，专注把零散灵感转化为可交付的营销方案。在 Akool 推动多项本地化功能与 A/B 实验，擅长 AIGC 工作流、知识库沉淀与模板化复用。目前 0→1 孵化 innofusion，提出“气泡化输入 × 气泡融合 × 方案骨架导出”的前链路方法论，并完成前端原型与宣传视频上线。',
		'site.founder.highlight1': '在 Akool 推动 5 项本地化功能；关键体验指标 A/B +44%',
		'site.founder.highlight2': '建立需求优先级与反馈机制，响应周期 14 天 → 5 天',
		'site.founder.highlight3': 'AIGC 自动化生产链单日 300+ 素材，月度成本节省 $15k+',
		'site.founder.highlight4': '主导 innofusion 原型与宣传视频：气泡化输入 → 气泡融合 → 方案骨架导出',
		'site.founder.tags': 'AIGC 工作流｜Agentic BI｜产品 0→1｜A/B 实验｜模板生态与知识库｜营销策划结构化｜PLG 增长',
		'app.brand': 'Bubblefusion',
		'settings.title': '系统设置',
		'settings.light': '浅色模式',
		'settings.dark': '深色模式',
		'settings.uiLanguage': '界面语言',
		'settings.replyLanguage': '回复语言',
		'settings.userGuide': '用户手册',
		'settings.shortcuts': '键盘快捷键',
		'lang.zh': '中文',
		'lang.en': 'English',
		'toolbar.addBubble': '添加气泡',
		'toolbar.searchBubble': '搜索气泡',
		'toolbar.searchPrompt': '搜索气泡关键词:',
		'toolbar.randomize': '随机打散位置',
		'toolbar.deleteSelected': '删除选中',
		'toolbar.saveLayout': '保存布局',
		'toolbar.showHistory': '显示历史',
		'toolbar.hideHistory': '隐藏历史',
		'toolbar.lowPerfOn': '开启低配模式',
		'toolbar.lowPerfOff': '关闭低配模式',
		'control.searchPlaceholder': '搜索气泡...',
		'control.search': '搜索',
		'control.exportJson': '导出 JSON',
		'control.addPrompt': '请输入气泡内容:',
		// Common actions / labels
		'action.copied': '已复制',
		'action.copyAll': '复制全部',
		'action.copyMarkdown': '复制 Markdown',
		'action.copyJSON': '复制 JSON',
		'action.more': '更多内容',
		'action.less': '压缩高度',
		'action.fullscreen': '全屏',
		'action.expand': '全屏展开',
		'action.exitFullscreen': '退出全屏',
		'action.continue': '继续创作',
		'action.executeAgent': '交给Agent执行',
		'action.regenerate': '按当前语言重生成',
		'action.close': '关闭',
		'action.enableTaskSelection': '启用任务勾选导出',
		'action.copyTaskBoard': '复制任务看板',
		'label.document': '文档',
		'label.image': '图片',
		'label.video': '视频',
		'label.oneSentence': '一句话主张',
		'label.bigIdea': 'Big Idea',
		'label.titleTop5': '标题 Top 5',
		'label.hookTop5': '开场钩子 Top 5',
		'label.pipeline': '传播链路',
		'label.assets': '素材清单',
		'label.coreSellingDiff': '核心卖点与差异',
		'label.milestones': '里程碑',
		'label.mvp': 'MVP',
		'label.kpi': '关键指标 KPI',
		'label.history': '融合历史',
		'label.totalFusions': '共 {count} 次融合',
		'loading.fusing': '正在融合与生成建议...',
		'placeholder.promptOptional': '@ 提示词（可选）',
		'label.about': '聊关于：',
		'tooltip.select': '选择 (V)',
		'tooltip.pan': '移动浏览 (H 或 Space+Drag)',
		'tooltip.minimap': '小地图',
		'tooltip.zoomIn': '放大',
		'tooltip.zoomOut': '缩小',
		'prompt.chooseModel': '选择模型',
		'prompt.optimize': '优化提示',
		'prompt.quadrant': '四象限：卖点/反共识/最小验证/话术',
		'prompt.videoScript': '短视频脚本生成',
		'prompt.landingPage': '落地页要点',
		'prompt.videoScript.desc': '生成1条短视频脚本：标题、三段结构、镜头设计与行动号召',
		'prompt.landingPage.desc': '输出落地页骨架：首屏价值主张/利益点/社会证明/FAQ/CTA',
		'toast.markdownCopied': '已复制 Markdown 到剪贴板',
		'model.deepseek': 'DeepSeek（在线）',
		'model.ali': 'Ali Qwen（在线）',
		'model.local': '本地规则（离线）',
	},
	en: {
		// Site (website)
		'site.brand': 'innofusion',
		'site.nav.why': 'Why',
		'site.nav.gallery': 'Gallery',
		'site.nav.pricing': 'Pricing',
		'site.nav.customers': 'Customers',
		'site.nav.about': 'About',
		'site.nav.launch': 'Launch App',
		'site.hero.badge': 'AI-Powered Creative Workbench',
		'site.hero.title': 'All-in-one AI Workspace',
		'site.hero.sub': 'Fuse Ideas, Form Plans.',
		'site.hero.try': 'Try for free',
		'site.hero.demo': 'Watch Demo',
		'site.nav.features': 'Features',
		'site.nav.showcase': 'Showcase',
		'site.nav.solutions': 'Solutions',
		'site.nav.customers': 'Customers',
		'site.nav.about': 'About',
		'site.nav.why': 'Why Us',
		'site.nav.gallery': 'Gallery',
		'site.nav.pricing': 'Pricing',
		'site.why.badge': 'WHY INNOFUSION',
		'site.why.title': 'Creativity doesn\'t lack inspiration, it lacks a "shaper"',
		'site.feature1.title': 'Just give the idea.',
		'site.feature1.desc': 'Plans, explores, and creates like a real designer: automatically matching tools, mapping out directions, and turning scattered ideas into executable outcomes.',
		'site.feature1.bullet1': 'Prompt Assistant: Define style, goals, and constraints in one sentence.',
		'site.feature1.bullet2': 'Mind Map: Automatically break down paths and milestones.',
		'site.feature1.bullet3': 'One-Click Sketch: Start with a skeleton, then refine to components and layout.',
		'site.feature1.cta': 'Start Ideating',
		'site.feature2.title': 'One canvas, shared intelligence.',
		'site.feature2.desc': 'Mark key points, leave notes, and sketch frameworks on the canvas; the system reads intent and collaborates with team members to build reusable assets.',
		'site.feature2.bullet1': 'Parallel Collaboration: Comment, reference, and compare versions.',
		'site.feature2.bullet2': 'Knowledge Base Integration: Automatically cite past materials and guidelines.',
		'site.feature2.bullet3': 'Traceable: Every change can be rolled back and reviewed.',
		'site.feature2.cta': 'Start Collaborating',
		'site.feature3.title': 'All formats in one place.',
		'site.feature3.desc': 'From images and videos to presentations and landing pages, deliverables are generated instantly from templates; export, share, and deliver with zero friction.',
		'site.feature3.bullet1': 'Multi-format Output: Images, videos, Markdown, PPT, HTML.',
		'site.feature3.bullet2': 'One-Click Adaptation: Match platform dimensions and cover specs.',
		'site.feature3.bullet3': 'Exportable Links: Share anytime with controllable permissions.',
		'site.feature3.cta': 'Generate Now',
		'site.gallery.title': 'See the Creative Process',
		'site.gallery.sub': 'Discover inspiring projects, artwork, and designs made by our vibrant community.',
		'site.gallery.item1.title': 'Inspiration Fusion',
		'site.gallery.item2.title': 'Structured Output',
		'site.gallery.item3.title': 'Style Exploration',
		'site.gallery.item4.title': 'Plan Generation',
		'site.testimonials.title': 'Love from the community',
		'site.pricing.title': 'Flexible plans for every need',
		'site.pricing.sub': 'Flexible plans for teams of all sizes',
		'site.pricing.perMonth': 'mo',
		'site.pricing.plan.starter': 'Starter',
		'site.pricing.plan.team': 'Team',
		'site.pricing.plan.pro': 'Pro',
		'site.pricing.cta': 'Start now',
		'site.cta.title': 'Ready to fuse your next big idea?',
		'site.cta.sub': 'Get started now and experience the AI-powered creative workflow.',
		'site.cta.try': 'Try for free',
		'site.testimonials.title': 'Love from the community',
		'site.testimonials.item1.name': 'Jing Li',
		'site.testimonials.item1.role': 'Senior Marketing Strategist',
		'site.testimonials.item1.quote': 'innofusion completely changed our brainstorming sessions. Ideas used to be scattered, but now with bubble fusion, we can quickly organize them into a logical marketing plan framework. It\'s a stunning efficiency boost from 0 to 0.1.',
		'site.testimonials.item2.name': 'Alex Chen',
		'site.testimonials.item2.role': 'Indie Developer & Product Manager',
		'site.testimonials.item2.quote': 'For an indie developer who needs to validate ideas quickly, innofusion is a treasure. It visualizes vague concepts and helps structure them into actionable steps. Going from an idea to a product roadmap has never been so intuitive and efficient.',
		'site.testimonials.item3.name': 'Wei Zhang',
		'site.testimonials.item3.role': 'Creative Director | XYZ Ads',
		'site.testimonials.item3.quote': 'Our team uses innofusion for creative co-creation. It not only frees up the collision of ideas, but more importantly, the \'fusion\' process itself builds team consensus. The final exported plan skeleton makes the goal clear to everyone.',
		'site.culture.title': 'Our Story',
		'site.culture.vision': 'Vision',
		'site.culture.mission': 'Mission',
		'site.culture.values': 'Values',
		'site.culture.story': 'innofusion was born from real pains of creative teams: scattered info, repeated communication, and non-reusable outputs. We fused interactive canvas, AI search and agents into one workspace to deliver end-to-end outcomes.',
		'site.founder.name': 'Chen Xuannen',
		'site.founder.role': 'Founder & Head of Product, innofusion',
		'site.founder.quote': 'Creativity doesn\'t lack inspiration, it lacks a "shaper." I hope to use more intuitive expressions (bubbles) and combinable structures (fusion) to turn the spark of inspiration into a deliverable plan.',
		'site.founder.card_desc': 'AI+BI Product Manager, building innofusion from 0→1 with a “bubble input × fusion” methodology to turn scattered ideas into actionable marketing plans.',
		'site.founder.desc': 'AI+BI product manager focused on turning scattered ideas into actionable marketing plans. Previously led localization and A/B experiments at Akool; skilled in AIGC workflows, knowledge-base building, and template-driven execution. Now building innofusion from 0→1 with a “bubble visualization + fusion → plan skeleton” methodology. Prototype and promo video are live.',
		'site.founder.highlight1': 'Shipped 5 localization features at Akool; improved key UX metrics by 44% via A/B testing',
		'site.founder.highlight2': 'Cut feature request response time from 14 days to 5 days',
		'site.founder.highlight3': 'Automated AIGC pipeline for 300+ daily assets, saving $15k+ monthly',
		'site.founder.highlight4': 'Led innofusion prototype & promo video: Bubble Input → Fusion → Plan Skeleton',
		'site.founder.tags': 'AIGC Workflow｜Agentic BI｜Product 0→1｜A/B Testing｜Template Ecosystem｜Structured Marketing｜PLG',
		'app.brand': 'Bubblefusion',
		'settings.title': 'Settings',
		'settings.light': 'Light mode',
		'settings.dark': 'Dark mode',
		'settings.uiLanguage': 'UI language',
		'settings.replyLanguage': 'Reply language',
		'settings.userGuide': 'User guide',
		'settings.shortcuts': 'Keyboard shortcuts',
		'lang.zh': '中文',
		'lang.en': 'English',
		'toolbar.addBubble': 'Add bubble',
		'toolbar.searchBubble': 'Search bubbles',
		'toolbar.searchPrompt': 'Search keyword:',
		'toolbar.randomize': 'Shuffle positions',
		'toolbar.deleteSelected': 'Delete selected',
		'toolbar.saveLayout': 'Save layout',
		'toolbar.showHistory': 'Show history',
		'toolbar.hideHistory': 'Hide history',
		'toolbar.lowPerfOn': 'Enable low-power mode',
		'toolbar.lowPerfOff': 'Disable low-power mode',
		'control.searchPlaceholder': 'Search bubbles...',
		'control.search': 'Search',
		'control.exportJson': 'Export JSON',
		'control.addPrompt': 'Enter bubble text:',
		// Common actions / labels
		'action.copied': 'Copied',
		'action.copyAll': 'Copy all',
		'action.copyMarkdown': 'Copy Markdown',
		'action.copyJSON': 'Copy JSON',
		'action.more': 'More',
		'action.less': 'Condense',
		'action.fullscreen': 'Fullscreen',
		'action.expand': 'Expand',
		'action.exitFullscreen': 'Exit fullscreen',
		'action.continue': 'Continue',
		'action.executeAgent': 'Execute with Agent',
		'action.regenerate': 'Regenerate in current language',
		'action.close': 'Close',
		'action.enableTaskSelection': 'Enable task selection export',
		'action.copyTaskBoard': 'Copy Kanban',
		'label.document': 'Document',
		'label.image': 'Image',
		'label.video': 'Video',
		'label.oneSentence': 'One-sentence claim',
		'label.bigIdea': 'Big Idea',
		'label.titleTop5': 'Titles Top 5',
		'label.hookTop5': 'Hooks Top 5',
		'label.pipeline': 'Distribution',
		'label.assets': 'Assets',
		'label.coreSellingDiff': 'Selling points & Differentiation',
		'label.milestones': 'Milestones',
		'label.mvp': 'MVP',
		'label.kpi': 'KPI',
		'label.history': 'Fusion History',
		'label.totalFusions': 'Total {count} fusions',
		'loading.fusing': 'Fusing and generating suggestions...',
		'placeholder.promptOptional': '@ Prompt (optional)',
		'label.about': 'Talking about:',
		'tooltip.select': 'Select (V)',
		'tooltip.pan': 'Pan (H or Space+Drag)',
		'tooltip.minimap': 'Minimap',
		'tooltip.zoomIn': 'Zoom in',
		'tooltip.zoomOut': 'Zoom out',
		'prompt.chooseModel': 'Choose model',
		'prompt.optimize': 'Prompt helper',
		'prompt.quadrant': 'Quadrants: selling/contrarian/MVP/talk track',
		'prompt.videoScript': 'Video script',
		'prompt.landingPage': 'Landing page outline',
		'prompt.videoScript.desc': 'Generate a 15-60s script: title, 3-part structure, shots and CTA',
		'prompt.landingPage.desc': 'Output LP skeleton: headline/benefits/social proof/FAQ/CTA',
		'toast.markdownCopied': 'Markdown copied to clipboard',
		'model.deepseek': 'DeepSeek (online)',
		'model.ali': 'Ali Qwen (online)',
		'model.local': 'Local rules (offline)',
	},
};

export function I18nProvider({ children }) {
	const [lang, setLang] = useState(() => localStorage.getItem('lang') || 'zh');

	useEffect(() => {
		localStorage.setItem('lang', lang);
	}, [lang]);

	const t = useMemo(() => {
		return (key, fallback) => {
			const dict = translations[lang] || {};
			return dict[key] ?? fallback ?? key;
		};
	}, [lang]);

	const value = useMemo(() => ({ lang, setLang, t }), [lang, setLang, t]);

	return (
		<I18nContext.Provider value={value}>
			{children}
		</I18nContext.Provider>
	);
}

export function useI18n() {
	return useContext(I18nContext);
}


