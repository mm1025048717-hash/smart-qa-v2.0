# TTS 音质优化说明

## 问题
用户反馈回复有电流音，且声音不够好听。

## 解决方案：切换到 Deepgram TTS

### 已完成的修改
✅ 已将 `TTS_SERVICE` 从 `cartesia` 切换到 `deepgram`

### Deepgram TTS 的优势

1. **与 STT 共用 API Key**
   - 您已经有 Deepgram API Key（用于 STT）
   - 无需额外配置，直接使用

2. **免费额度更高**
   - Deepgram：每月 $200 免费额度
   - Cartesia：每月 $10 免费额度

3. **音质更好**
   - 自然语音，低延迟
   - 支持中文，音质清晰
   - 电流音问题应该会明显改善

4. **无需额外配置**
   - 自动使用已有的 `DEEPGRAM_API_KEY`
   - 无需获取新的 API Key

## 下一步

1. **重启后端服务**：
   ```bash
   cd voice-backend
   python voice_bot.py
   ```

2. **查看日志**：
   - 应该看到：`✅ 使用 Deepgram TTS（与 STT 共用 API Key）`

3. **测试语音对话**：
   - 刷新浏览器页面（F5）
   - 发送语音消息
   - 听回复的音频质量
   - 检查电流音是否改善

## 预期效果

- ✅ 电流音应该明显减少或消失
- ✅ 音质更加清晰自然
- ✅ 中文发音更加准确
- ✅ 整体语音质量提升

## 如果问题仍然存在

如果切换到 Deepgram 后仍有问题：

1. **检查音频设备**
   - 确保使用高质量的扬声器或耳机
   - 检查音频驱动是否最新

2. **检查网络**
   - 确保网络连接稳定
   - 避免网络延迟导致的音频问题

3. **检查浏览器**
   - 尝试不同的浏览器（Chrome、Edge 等）
   - 清除浏览器缓存

