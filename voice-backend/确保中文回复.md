# 确保中文回复

## 问题描述
用户报告 AI 回复仍然是英文，而不是中文。

## 修复方案

### 1. 加强系统提示词
在 `COMMON_VOICE_RULES` 开头添加了明确的语言要求：

```python
⚠️ 语言要求：必须用中文（简体中文）回复，禁止使用英文或其他语言！
⚠️ 所有回复、对话、说明都必须使用中文，不得使用英文单词或英文句子！
⚠️ 即使遇到英文专业术语，也要用中文解释或使用中文对应词汇！
```

### 2. STT 配置（已完成）
- Deepgram STT 已配置为 `zh-CN`（简体中文）
- 使用 `nova-2` 模型（支持中文）

## 测试步骤

1. **重启后端服务**
   ```bash
   cd voice-backend
   python voice_bot.py
   ```

2. **检查日志**
   - 应该看到：`✅ Deepgram STT 已配置为中文（zh-CN），模型：nova-2`

3. **测试语音对话**
   - 刷新浏览器页面（F5）
   - 点击语音按钮开始录音
   - 用中文说话（例如："你好，请用中文回复我"）
   - 停止录音
   - 检查 AI 回复是否为中文

4. **验证回复语言**
   - 发送多条中文语音消息
   - 确认所有回复都是中文
   - 确认没有英文单词或英文句子

## 如果问题仍然存在

如果配置后回复仍然是英文：

1. **检查后端日志**
   - 查看 STT 转录结果是否为中文
   - 查看 LLM 调用是否有错误

2. **检查系统提示词是否生效**
   - 查看后端日志中的系统提示词
   - 确认提示词包含中文要求

3. **手动测试 LLM**
   - 可以直接调用 DeepSeek API 测试
   - 确认 LLM 是否能正确理解中文要求

4. **检查 DeepSeek 模型配置**
   - 确认使用的是 `deepseek-chat` 模型
   - 确认模型支持中文

