# 🚀 快速部署指南 - GitHub Pages & Vercel

## 📋 部署前准备

1. **确保代码已提交到 GitHub**
   ```bash
   git add .
   git commit -m "准备部署"
   git push origin main
   ```

2. **获取 DeepSeek API Key**
   - 访问 https://platform.deepseek.com/
   - 注册/登录账号
   - 创建 API Key（格式：`sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`）

---

## 🌐 方式一：部署到 Vercel（推荐）

### 优点
- ✅ 支持 Serverless Functions（API 路由）
- ✅ 自动 HTTPS
- ✅ 全球 CDN
- ✅ 自动部署（GitHub 推送后自动部署）

### 步骤

#### 1. 连接 GitHub 仓库

1. 访问 [Vercel Dashboard](https://vercel.com/dashboard)
2. 点击 **Add New Project**
3. 选择 **Import Git Repository**
4. 选择你的仓库：`smart-qa-v2.0`
5. 点击 **Import**

#### 2. 配置项目

Vercel 会自动检测配置，确认：
- **Framework Preset**: Vite ✅
- **Root Directory**: `./` ✅
- **Build Command**: `npm run build` ✅
- **Output Directory**: `dist` ✅

#### 3. 配置环境变量

在部署前，点击 **Environment Variables**，添加：

| Key | Value | Environment |
|-----|-------|-------------|
| `DEEPSEEK_API_KEY` | 你的 DeepSeek API Key | Production, Preview, Development |

> **重要**：选择所有环境（Production、Preview、Development）

#### 4. 部署

1. 点击 **Deploy** 按钮
2. 等待部署完成（1-3 分钟）
3. 部署成功后，Vercel 会提供预览 URL

#### 5. 验证部署

1. 访问部署的 URL
2. 测试发送消息，确认 API 正常工作
3. 检查浏览器控制台，确认没有错误

---

## 📄 方式二：部署到 GitHub Pages

### 优点
- ✅ 免费静态托管
- ✅ 自动部署（GitHub Actions）
- ✅ 自定义域名支持

### 缺点
- ❌ 不支持 Serverless Functions
- ❌ 需要配置 API Key 到前端（安全性较低）

### 步骤

#### 1. 启用 GitHub Pages

1. 访问你的 GitHub 仓库
2. 点击 **Settings** → **Pages**
3. 在 **Source** 部分：
   - 选择 **GitHub Actions**（不要选择分支）
4. 保存设置

#### 2. 配置 GitHub Secrets（可选）

如果需要使用 API Key：

1. 进入 **Settings** → **Secrets and variables** → **Actions**
2. 点击 **New repository secret**
3. 添加：
   - **Name**: `VITE_DEEPSEEK_API_KEY`
   - **Value**: 你的 DeepSeek API Key
4. 点击 **Add secret**

#### 3. 推送代码

```bash
git add .
git commit -m "部署到 GitHub Pages"
git push origin main
```

#### 4. 查看部署状态

1. 访问仓库的 **Actions** 标签页
2. 查看最新的工作流运行状态
3. 等待部署完成（2-5 分钟）

#### 5. 访问网站

部署成功后，访问：
```
https://[你的用户名].github.io/[仓库名]/
```

---

## 🔧 环境变量配置对比

| 平台 | 环境变量名称 | 配置位置 | 用途 |
|------|------------|---------|------|
| **Vercel** | `DEEPSEEK_API_KEY` | Vercel Dashboard → Environment Variables | Serverless Function 使用 |
| **Vercel** | `VITE_DEEPSEEK_API_KEY` | Vercel Dashboard → Environment Variables | 前端构建时注入（可选） |
| **GitHub Pages** | `VITE_DEEPSEEK_API_KEY` | GitHub Secrets | 前端构建时注入 |

---

## ✅ 部署检查清单

### Vercel 部署

- [ ] 项目已连接到 GitHub 仓库
- [ ] 环境变量 `DEEPSEEK_API_KEY` 已配置
- [ ] API 路由文件 `api/deepseek.js` 存在
- [ ] `vercel.json` 配置正确
- [ ] 部署成功，网站可以访问
- [ ] API 路由正常工作（测试发送消息）

### GitHub Pages 部署

- [ ] GitHub Pages 已启用（使用 GitHub Actions）
- [ ] GitHub Secrets 已配置（如需要）
- [ ] 代码已推送到 main 分支
- [ ] Actions 工作流运行成功
- [ ] 网站可以正常访问

---

## 🐛 常见问题

### Q: Vercel 部署后 API 返回 401 错误？

**A**: 检查环境变量：
1. 确认 `DEEPSEEK_API_KEY` 已添加到 Vercel
2. 确认已应用到所有环境
3. 重新部署项目

### Q: GitHub Pages 部署后无法调用 API？

**A**: GitHub Pages 是静态托管，不支持后端：
- 使用 Vercel 部署（推荐）
- 或配置前端直接调用 DeepSeek API（需要处理 CORS）

### Q: 如何更新部署？

**A**:
- **Vercel**: 推送代码到 GitHub，自动部署
- **GitHub Pages**: 推送代码到 main 分支，Actions 自动部署

---

## 📚 详细文档

- [完整部署指南](./部署指南.md)
- [Vercel 环境变量配置](./Vercel环境变量配置.md)
- [GitHub Pages 部署设置](./.github/DEPLOYMENT_SETUP.md)

---

## 🎯 推荐方案

**推荐使用 Vercel 部署**，因为：
1. ✅ 支持 Serverless Functions（API 路由）
2. ✅ API Key 更安全（存储在服务器端）
3. ✅ 自动 HTTPS 和 CDN
4. ✅ 部署速度更快

**GitHub Pages 适合**：
- 纯静态网站
- 不需要后端 API 的场景
- 免费静态托管需求
