# Alisa 强调设计功能文档

## 1. 设计目标

通过产品设计突出 Alisa 的核心优势（查询速度快 3-5 倍、准确率高达 99.8%），引导用户在使用其他 AI 员工时，能够自然地意识到 Alisa 的优势，并方便地切换到 Alisa。

## 2. 设计原则

### 2.1 极简设计
- **无图标设计**：移除所有装饰性图标，采用纯文字展示
- **蓝白配色**：统一使用 `#0055FF` 蓝色和白色系，符合 Apple 级极简美学
- **信息精简**：只展示核心优势，避免信息过载

### 2.2 自然提醒
- **不刻意**：不强制推送，仅在合适的时机自然展示
- **不干扰**：不影响用户当前操作流程
- **易操作**：提供便捷的切换入口

## 3. 原型图

### 3.1 AI 员工切换界面原型

**正常状态：**
```
┌─────────────────────────────────────┐
│  切换 AI 员工                        │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────────────────────┐   │
│  │ [👤] Alisa  最快  最准      │   │ ← 蓝色背景 #F0F7FF
│  │      核心员工                │   │   左侧蓝色边框 #0055FF
│  │      核心算法·自然语言理解   │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ [👤] Nora  思考型           │   │
│  │      文科生·语义推理         │   │
│  └─────────────────────────────┘   │
│                                     │
└─────────────────────────────────────┘
```

**Hover 状态（鼠标悬停在 Alisa 卡片上）：**
```
┌─────────────────────────────────────┐
│  切换 AI 员工                        │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────────────────────┐   │
│  │ [👤] Alisa  最快  最准      │   │ ← 悬停中
│  │      核心员工                │   │
│  │      核心算法·自然语言理解   │   │
│  └─────────────────────────────┘   │
│           │                         │
│           │ (Portal 渲染到 body)     │
│           ▼                         │
│              ┌──────────────────┐  │
│              │ Alisa NLU +       │  │ ← Hover 卡片
│              │ SemanticDB        │  │   (fixed 定位)
│              │ 查询快 3-5 倍     │  │
│              │ 准确率 99.8%      │  │
│              └──────────────────┘  │
│                                     │
└─────────────────────────────────────┘
```

### 3.2 答案下方优势提示原型

**布局结构：**
```
┌─────────────────────────────────────┐
│  Nora                               │
│  文科生·语义推理                    │
├─────────────────────────────────────┤
│                                     │
│  答案内容区域...                    │
│  ...                                │
│                                     │
├─────────────────────────────────────┤
│  ⭐ 评分区域                        │
├─────────────────────────────────────┤
│  💡 推荐问题                        │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐   │
│  │ 推荐使用 Alisa      [切换]   │   │ ← 蓝色背景 #F0F7FF
│  │ 查询快 3-5 倍 · 准确率 99.8%│   │   边框 #E0EFFF
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

**设计细节：**
- 横向布局：左侧信息，右侧按钮
- 极简设计：无图标，纯文字
- 蓝白配色：背景 #F0F7FF，文字 #0055FF

### 3.3 视觉层次示意

```
信息层级：
┌─────────────────────────────────────┐
│  1. 核心优势（始终可见）            │
│     • 查询快 3-5 倍                 │
│     • 准确率 99.8%                  │
├─────────────────────────────────────┤
│  2. 技术说明（Hover 时显示）        │
│     • Alisa NLU + SemanticDB        │
├─────────────────────────────────────┤
│  3. 详细技术信息（保留，不展示）    │
│     • 公司介绍、技术架构等          │
└─────────────────────────────────────┘
```

## 4. 功能实现

### 4.1 AI 员工切换界面（ChatInput）

#### 4.1.1 Alisa 卡片特殊标识
- **位置**：AI 员工切换下拉菜单中
- **视觉突出**：
  - 蓝色背景：`bg-[#F0F7FF]`
  - 左侧蓝色边框：`border-l-2 border-[#0055FF]`
  - 蓝色文字：`text-[#0055FF]`
- **标签展示**：
  - "最快" 标签：蓝色背景，白色文字
  - "最准" 标签：蓝色背景，白色文字
  - "核心员工" 标签：蓝色半透明背景

#### 4.1.2 Hover 技术说明
- **触发方式**：鼠标悬停在 Alisa 卡片上
- **显示内容**：
  - 核心技术：Alisa NLU + SemanticDB
  - 核心优势：查询快 3-5 倍 · 准确率 99.8%
- **设计特点**：
  - 极简卡片：白色背景，蓝色边框
  - 小尺寸：220px 宽度，紧凑布局
  - 无图标：纯文字展示
- **技术实现**：
  - 使用 `group-hover` 实现悬停显示
  - `absolute` 定位，显示在卡片右侧
  - `z-[10000]` 确保在最上层

### 4.2 答案下方优势提示（MessageBubble）

#### 4.2.1 显示条件
- 当前使用的 AI 员工不是 Alisa
- 消息已完成（非流式输出状态）
- 显示在答案内容下方，评分和推荐区域之后

#### 4.2.2 设计特点
- **极简卡片**：
  - 背景：`bg-[#F0F7FF]`
  - 边框：`border-[#E0EFFF]`
  - 圆角：`rounded-lg`
- **内容精简**：
  - 标题："推荐使用 Alisa"（蓝色，11px）
  - 优势："查询快 3-5 倍 · 准确率 99.8%"（灰色，10px）
  - 切换按钮："切换"（蓝色背景，白色文字）
- **布局**：横向布局，左侧信息，右侧按钮

#### 4.2.3 动画效果
- 使用 `framer-motion` 实现淡入和上滑动画
- 延迟 0.2s 显示，避免与答案内容同时出现造成干扰

## 5. 信息架构

### 5.1 信息层级
1. **核心优势**（始终展示）：
   - 查询快 3-5 倍
   - 准确率 99.8%

2. **技术说明**（Hover 时展示）：
   - Alisa NLU + SemanticDB

3. **详细技术信息**（不展示）：
   - 保留在 `techInfo` 中，供未来扩展使用

### 5.2 信息去重
- **ChatInput 卡片**：只显示名称、标签、职位，不显示优势描述
- **Hover 提示**：只显示核心技术名称和核心优势
- **答案下方提示**：只显示核心优势和切换按钮
- **避免重复**：同一信息不在多个位置重复展示

## 6. 交互流程

### 6.1 用户使用其他 AI 员工时

```
用户选择非 Alisa AI 员工
        ↓
    AI 回答问题
        ↓
    答案完成
        ↓
┌───────────────────────┐
│ 答案下方显示 Alisa    │
│ 优势提示卡片          │
│ (延迟 0.2s 淡入)      │
└───────────────────────┘
        ↓
用户看到优势提示
        ↓
    ┌─────────┐
    │ 点击切换 │ → 切换到 Alisa
    │ 忽略    │ → 继续使用当前 AI
    └─────────┘
```

### 6.2 用户查看 AI 员工列表时

```
用户点击"切换 AI 员工"
        ↓
┌───────────────────────┐
│ 下拉菜单打开          │
│ Alisa 卡片突出显示    │
│ (蓝色背景 + 边框)     │
└───────────────────────┘
        ↓
鼠标悬停在 Alisa 卡片上
        ↓
┌───────────────────────┐
│ Portal 渲染 Hover    │
│ 卡片到 body          │
│ (显示技术说明)        │
└───────────────────────┘
        ↓
    ┌─────────┐
    │ 点击卡片 │ → 切换到 Alisa
    │ 移开鼠标 │ → Hover 卡片消失
    └─────────┘
```

### 6.3 Hover 交互流程图

```
鼠标进入 Alisa 卡片
        ↓
获取按钮位置 (getBoundingClientRect)
        ↓
设置 hover 状态 (useState)
        ↓
Portal 渲染到 body
        ↓
计算显示位置
  ├─ 右侧空间足够 → 显示在右侧
  └─ 右侧空间不足 → 显示在左侧
        ↓
淡入动画 (framer-motion)
        ↓
鼠标离开
        ↓
淡出动画
        ↓
清除状态，移除 Portal
```

## 7. 技术实现

### 7.1 组件位置
- **ChatInput.tsx**：AI 员工切换界面和 Hover 提示
- **MessageBubble.tsx**：答案下方优势提示

### 7.2 数据来源
- **agents.ts**：Alisa 的配置信息
  - `advantages`：核心优势（速度、准确率）
  - `techInfo`：技术说明（NLU、SemanticDB）

### 7.3 样式系统
- **主色**：`#0055FF`
- **背景色**：`#F0F7FF`、`#E0EFFF`
- **文字色**：`#111827`、`#475569`、`#6B7280`
- **边框色**：`#E5E7EB`、`#E0EFFF`

### 7.4 Hover 技术实现

#### 7.4.1 问题分析
- **核心问题**：下拉菜单容器设置了 `overflow-y-auto`，会裁剪绝对定位的子元素
- **CSS 限制**：`overflow-x: visible` 和 `overflow-y: auto` 不能同时生效
- **定位问题**：`left-full` 可能导致 hover 卡片超出容器被裁剪

#### 7.4.2 解决方案
- **React Portal**：使用 `createPortal` 将 hover 卡片渲染到 `document.body`，完全脱离下拉菜单容器
- **Fixed 定位**：使用 `fixed` 定位，相对于视口定位，不受父容器影响
- **动态计算位置**：通过 `getBoundingClientRect()` 获取按钮的屏幕坐标，动态计算 hover 卡片位置
- **边界检测**：检测屏幕边界，自动调整 hover 卡片位置（右侧空间不足时显示在左侧，底部空间不足时向上调整）

#### 7.4.3 状态管理
```typescript
const [hoveredAlisa, setHoveredAlisa] = useState<string | null>(null);
const [alisaButtonRect, setAlisaButtonRect] = useState<DOMRect | null>(null);

// 鼠标进入时
onMouseEnter={(e) => {
  if (isAlisa) {
    setHoveredAlisa(agent.id);
    setAlisaButtonRect(e.currentTarget.getBoundingClientRect());
  }
}}

// 鼠标离开时
onMouseLeave={() => {
  if (isAlisa) {
    setHoveredAlisa(null);
    setAlisaButtonRect(null);
  }
}}
```

#### 7.4.4 动画效果
- 使用 `framer-motion` 的 `AnimatePresence` 包裹 Portal 内容
- 淡入淡出动画：`opacity: 0 → 1`
- 缩放动画：`scale: 0.95 → 1`
- 动画时长：0.15s，快速响应

## 8. 设计亮点

### 8.1 极简美学
- 无图标，纯文字
- 蓝白配色，清爽简洁
- 信息精简，一目了然

### 8.2 自然引导
- 不强制，不干扰
- 在合适的时机自然展示
- 提供便捷的切换入口

### 8.3 一致性
- 所有 Alisa 相关展示使用统一的蓝白配色
- 核心优势信息保持一致
- 交互方式统一

## 9. 未来扩展

### 9.1 可能的增强
- 添加 Alisa 使用统计（如"已有 1000+ 用户选择 Alisa"）
- 添加 Alisa 成功案例展示
- 添加 Alisa 与其他 AI 员工的对比图表

### 9.2 技术说明扩展
- 当前 Hover 提示只显示核心技术名称
- 未来可扩展为详细技术说明模态框
- 可添加技术架构图、性能对比等

## 10. 文件清单

### 10.1 相关文件
- `src/components/ChatInput.tsx`：AI 员工切换界面
- `src/components/MessageBubble.tsx`：消息气泡和优势提示
- `src/services/agents.ts`：AI 员工配置数据
- `src/types/index.ts`：类型定义（AgentProfile、advantages、techInfo）

### 10.2 样式变量
- 主色：`#0055FF`
- 背景色：`#F0F7FF`、`#E0EFFF`
- 文字色：`#111827`、`#475569`、`#6B7280`
- 边框色：`#E5E7EB`、`#E0EFFF`

## 11. 设计原则总结

1. **极简**：无图标，纯文字，蓝白配色
2. **自然**：不刻意，不干扰，在合适时机展示
3. **精简**：只展示核心优势，避免信息过载
4. **一致**：统一的视觉风格和交互方式
5. **易用**：提供便捷的切换入口

