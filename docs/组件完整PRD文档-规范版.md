# 智能问答系统 - 组件完整PRD文档（规范版）

---

## 📋 文档信息

| 项目 | 内容 |
|------|------|
| **文档名称** | 智能问答系统 - 组件完整PRD文档 |
| **文档版本** | 3.0.0（规范版） |
| **创建日期** | 2024-12-15 |
| **最后更新** | 2024-12-15 |
| **文档类型** | 产品需求文档（Product Requirements Document） |
| **文档状态** | ✅ 已审核 |
| **维护者** | 产品团队 & 开发团队 |
| **审核者** | 产品经理、技术负责人 |

---

## 📑 目录

1. [产品概述](#1-产品概述)
2. [文档说明](#2-文档说明)
3. [组件分类体系](#3-组件分类体系)
4. [核心交互组件](#4-核心交互组件)
5. [KPI和卡片组件](#5-kpi和卡片组件)
6. [图表组件](#6-图表组件)
7. [数据可视化组件](#7-数据可视化组件)
8. [文本和叙述组件](#8-文本和叙述组件)
9. [故事和报告组件](#9-故事和报告组件)
10. [交互组件](#10-交互组件)
11. [场景和面板组件](#11-场景和面板组件)
12. [页面组件](#12-页面组件)
13. [设计系统规范](#13-设计系统规范)
14. [技术实现规范](#14-技术实现规范)
15. [测试验收标准](#15-测试验收标准)
16. [附录](#16-附录)

---

## 1. 产品概述

### 1.1 产品背景

智能问答系统是一个基于AI的数据分析和可视化平台，通过自然语言交互帮助用户快速获取数据洞察。系统采用组件化架构，支持60+个可复用组件，能够灵活组合生成各种数据分析和报告。

### 1.2 产品目标

- **用户体验**：提供流畅、直观的自然语言交互体验
- **可视化能力**：支持多种图表类型和数据展示方式
- **扩展性**：组件化设计，易于扩展和维护
- **性能**：高效的渲染性能和流畅的动画效果

### 1.3 目标用户

- 数据分析师
- 业务人员
- 产品经理
- 决策者

### 1.4 核心价值

- 🔍 **智能问答**：自然语言理解，快速获取数据洞察
- 📊 **丰富可视化**：60+种组件，覆盖各种数据展示场景
- 🎨 **精美设计**：Apple风格设计，提供极致视觉体验
- ⚡ **高性能**：流畅的动画和快速响应

---

## 2. 文档说明

### 2.1 文档目的

本文档旨在为开发团队提供完整的组件规范，包括：
- 每个组件的功能定义
- 数据结构和接口规范
- UI/UX设计规范
- 使用示例和最佳实践
- 技术实现要点

### 2.2 文档范围

本文档涵盖智能问答系统中所有60+个组件的完整规范，包括：
- 核心交互组件（3个）
- KPI和卡片组件（3个）
- 图表组件（12个）
- 数据可视化组件（1个）
- 文本和叙述组件（7个）
- 故事和报告组件（22个）
- 交互组件（12个）
- 场景和面板组件（4个）
- 页面组件（1个）

### 2.3 文档结构

每个组件的PRD包含以下部分：
1. **组件基本信息**：名称、文件位置、组件类型
2. **功能描述**：组件的核心功能和用途
3. **用户故事**：使用场景和用户需求
4. **数据结构**：接口定义和数据类型
5. **UI/UX设计**：视觉设计和交互规范
6. **技术规范**：实现要求和注意事项
7. **使用示例**：代码示例和最佳实践
8. **验收标准**：功能验收和测试要求

### 2.4 文档维护

- **更新频率**：组件变更时及时更新
- **版本控制**：使用语义化版本号
- **评审流程**：产品团队和技术团队共同评审

---

## 3. 组件分类体系

### 3.1 分类标准

组件按照功能和使用场景进行分类：

| 分类 | 组件数量 | 主要用途 |
|------|---------|---------|
| **核心交互组件** | 3 | 消息气泡、输入框、侧边栏 |
| **KPI和卡片组件** | 3 | KPI展示、指标卡片 |
| **图表组件** | 12 | 各种数据图表可视化 |
| **数据可视化组件** | 1 | 数据筛选和可视化器 |
| **文本和叙述组件** | 7 | 文本展示、Markdown渲染 |
| **故事和报告组件** | 22 | 报告生成、故事叙述 |
| **交互组件** | 12 | 按钮、选择器、下钻交互 |
| **场景和面板组件** | 4 | 业务场景、测试面板 |
| **页面组件** | 1 | 欢迎页面 |

### 3.2 组件命名规范

- **文件命名**：PascalCase，如 `MessageBubble.tsx`
- **组件命名**：PascalCase，如 `MessageBubble`
- **类型命名**：kebab-case，如 `kpi`, `line-chart`

---

## 4. 核心交互组件

### 4.1 MessageBubble（消息气泡组件）

#### 4.1.1 组件信息

| 项目 | 内容 |
|------|------|
| **组件名称** | MessageBubble |
| **文件位置** | `src/components/MessageBubble.tsx` |
| **组件类型** | `MessageBubble` |
| **优先级** | P0（核心组件） |
| **依赖组件** | 无 |

#### 4.1.2 功能描述

消息气泡是对话界面的核心组件，用于显示用户和AI助手的消息内容。支持多种内容类型的渲染，包括文本、图表、KPI、表格等。

**核心功能**：
- 显示用户和AI的消息内容
- 支持多种内容类型的动态渲染
- 显示消息状态（流式输出、完成、错误）
- 支持操作按钮（追问、下钻、切换Agent）

#### 4.1.3 用户故事

**作为** 用户  
**我希望** 能够清晰地看到我和AI的对话内容  
**以便** 我能够理解AI的回答和进行后续交互

**作为** 用户  
**我希望** 看到AI思考的过程  
**以便** 我知道系统正在处理我的请求

#### 4.1.4 数据结构

```typescript
interface Message {
  id: string;                          // 消息唯一标识
  role: 'user' | 'assistant' | 'system'; // 消息角色
  content: ContentBlock[] | string;    // 消息内容（支持多种类型）
  timestamp: Date;                     // 时间戳
  agentId?: string;                    // Agent ID
  status?: 'streaming' | 'complete' | 'error'; // 消息状态
}

interface ContentBlock {
  id: string;                          // 内容块唯一标识
  type: ComponentType;                 // 组件类型（kpi、chart等）
  data: any;                           // 组件数据
}
```

#### 4.1.5 UI/UX设计规范

**用户消息气泡**：

```
┌────────────────────────────────────────┐
│  [👤] Alex Chen                14:30  │
│                                         │
│          ┌─────────────────────────┐   │
│          │  今年销售额是多少？     │   │
│          └─────────────────────────┘   │
│                                         │
└────────────────────────────────────────┘
```

**样式规范**：
- 背景色：`bg-[#007AFF]`（iOS蓝色）
- 文字颜色：`text-white`
- 对齐方式：右对齐
- 圆角：`rounded-2xl rounded-tr-sm`（右上角小圆角，Apple风格）
- 内边距：`px-4 py-3`
- 最大宽度：`max-w-[80%]`

**AI消息气泡**：

```
┌────────────────────────────────────────┐
│  [🤖] Alisa                    14:30  │
│                                         │
│  ┌─────────────────────────────────┐  │
│  │                                 │  │
│  │  根据数据，今年销售额为：        │  │
│  │                                 │  │
│  │  ┌─────────────────────────┐   │  │
│  │  │  ¥3,856万              │   │  │
│  │  │  ↑ 19.8%               │   │  │
│  │  └─────────────────────────┘   │  │
│  │                                 │  │
│  │  [追问] [下钻] [切换Agent]     │  │
│  └─────────────────────────────────┘  │
│                                         │
└────────────────────────────────────────┘
```

**样式规范**：
- 背景色：`bg-white`
- 文字颜色：`text-[#1d1d1f]`
- 对齐方式：左对齐
- 边框：`border border-[#E5E5EA]`
- 圆角：`rounded-2xl rounded-tl-sm`
- 阴影：`shadow-sm`
- 内边距：`px-5 py-4`

**流式输出状态**：
- 显示打字机动画效果
- 底部显示"正在思考..."提示
- 使用 `status: 'streaming'` 状态标识

#### 4.1.6 技术规范

**Props接口**：
```typescript
interface MessageBubbleProps {
  message: Message;
  onActionSelect?: (action: ActionItem) => void;
  onFilterChange?: (filters: FilterCondition[]) => void;
  onAgentSwitch?: (agentName: string) => void;
  isSearching?: boolean;
}
```

**渲染逻辑**：
- 根据 `message.role` 渲染不同样式
- 根据 `message.content` 类型动态渲染组件
- 使用 `ContentBlockRenderer` 统一处理内容渲染

**性能要求**：
- 消息渲染时间 < 100ms
- 支持无限滚动
- 使用 React.memo 优化重渲染

#### 4.1.7 使用示例

```typescript
<MessageBubble
  message={{
    id: 'msg-1',
    role: 'assistant',
    content: [
      { id: 'block-1', type: 'text', data: '根据数据...' },
      { id: 'block-2', type: 'kpi', data: { value: 3856, unit: '万' } }
    ],
    timestamp: new Date(),
    status: 'complete'
  }}
  onActionSelect={handleActionSelect}
  onAgentSwitch={handleAgentSwitch}
/>
```

#### 4.1.8 验收标准

- [ ] ✅ 正确渲染用户和AI消息的不同样式
- [ ] ✅ 支持所有 ContentBlock 类型的渲染
- [ ] ✅ 流式输出时显示正确的动画效果
- [ ] ✅ 操作按钮点击后正确触发回调
- [ ] ✅ 在移动端和桌面端显示正常
- [ ] ✅ 性能测试通过（100条消息流畅滚动）

---

### 4.2 ChatInput（聊天输入框组件）

#### 4.2.1 组件信息

| 项目 | 内容 |
|------|------|
| **组件名称** | ChatInput |
| **文件位置** | `src/components/ChatInput.tsx` |
| **组件类型** | `ChatInput` |
| **优先级** | P0（核心组件） |
| **依赖组件** | 无 |

#### 4.2.2 功能描述

聊天输入框用于用户输入问题和发送消息，支持多行文本输入、Agent切换、发送按钮等功能。

**核心功能**：
- 文本输入（支持多行）
- Agent选择器
- 发送按钮（支持快捷键）
- 快速问题按钮组
- 流式输出时的停止按钮

#### 4.2.3 用户故事

**作为** 用户  
**我希望** 能够方便地输入问题并发送  
**以便** 快速与AI进行交互

**作为** 用户  
**我希望** 能够快速切换不同的AI Agent  
**以便** 根据需求选择合适的助手

#### 4.2.4 UI/UX设计规范

```
┌────────────────────────────────────────┐
│  ┌─────────────────────────────────┐  │
│  │  [Agent▼] [输入框]       [发送] │  │
│  │                                 │  │
│  │  向 Alisa 提问...               │  │
│  │                                 │  │
│  └─────────────────────────────────┘  │
│                                         │
│  [快速问题1] [快速问题2] [快速问题3]  │
└────────────────────────────────────────┘
```

**样式规范**：
- **容器**：`bg-white border-t border-[#E5E5EA] px-6 py-4`
- **输入框**：`rounded-full border border-[#E5E5EA] focus:border-[#007AFF] max-h-32 px-5 py-3`
- **发送按钮**：`bg-[#007AFF] text-white rounded-full w-10 h-10`
- **Agent选择器**：下拉菜单，显示头像和名称

**交互规范**：
- Enter键发送，Shift+Enter换行
- 输入框聚焦时显示边框高亮
- 发送后自动清空输入框
- 禁用状态下禁用输入和发送

#### 4.2.5 技术规范

**Props接口**：
```typescript
interface ChatInputProps {
  onSend: (message: string) => void;
  disabled?: boolean;
  placeholder?: string;
  agents?: Agent[];
  currentAgent?: Agent;
  onAgentChange?: (agentId: string) => void;
  isStreaming?: boolean;
  onStop?: () => void;
  quickQuestions?: string[];
}
```

#### 4.2.6 使用示例

```typescript
<ChatInput
  onSend={handleSend}
  disabled={isLoading}
  placeholder="向 AI 提问..."
  agents={AGENTS}
  currentAgent={currentAgent}
  onAgentChange={handleAgentChange}
  isStreaming={isStreaming}
  onStop={handleStopStreaming}
  quickQuestions={['今年销售额是多少？', '分析销售趋势']}
/>
```

#### 4.2.7 验收标准

- [ ] ✅ 文本输入和发送功能正常
- [ ] ✅ Enter键发送，Shift+Enter换行
- [ ] ✅ Agent切换功能正常
- [ ] ✅ 快速问题点击后自动填入并发送
- [ ] ✅ 流式输出时显示停止按钮
- [ ] ✅ 禁用状态下所有交互被禁用

---

### 4.3 Sidebar（左侧边栏组件）

#### 4.3.1 组件信息

| 项目 | 内容 |
|------|------|
| **组件名称** | Sidebar |
| **文件位置** | `src/components/Sidebar.tsx` |
| **组件类型** | `Sidebar` |
| **优先级** | P1 |
| **依赖组件** | 无 |

#### 4.3.2 功能描述

左侧边栏提供导航功能，包括新对话、历史记录、设置等入口。支持折叠/展开功能。

**核心功能**：
- 新对话创建
- 历史对话列表
- 对话搜索
- 设置入口
- 折叠/展开切换

#### 4.3.3 UI/UX设计规范

**展开状态**（256px）：
- Logo/标题区域
- 新对话按钮
- 历史记录列表（可搜索）
- 设置入口
- 折叠按钮

**折叠状态**（64px）：
- 仅显示图标
- 悬停时显示工具提示

**样式规范**：
- 宽度（展开）：`w-64`（256px）
- 宽度（折叠）：`w-16`（64px）
- 背景：`bg-white`
- 边框：`border-r border-[#E5E5EA]`
- 过渡动画：`transition-all duration-300`

#### 4.3.4 验收标准

- [ ] ✅ 折叠/展开功能正常
- [ ] ✅ 新对话功能正常
- [ ] ✅ 历史记录列表显示正确
- [ ] ✅ 搜索功能正常
- [ ] ✅ 动画过渡流畅

---

## 5. KPI和卡片组件

### 5.1 PrimaryKPICard（主KPI卡片）

#### 5.1.1 组件信息

| 项目 | 内容 |
|------|------|
| **组件名称** | PrimaryKPICard |
| **文件位置** | `src/components/KPICard.tsx` |
| **组件类型** | `kpi` |
| **优先级** | P0 |
| **依赖组件** | 无 |

#### 5.1.2 功能描述

用于展示最重要的关键绩效指标，支持趋势显示、单位格式化、子指标展示等功能。

#### 5.1.3 数据结构

```typescript
interface KPIData {
  id: string;
  label: string;                      // 指标名称
  value: number | string;             // 指标值
  unit?: string;                      // 单位（万、%、等）
  prefix?: string;                    // 前缀（¥、$等）
  trend?: {
    value: number;                    // 趋势值
    direction: 'up' | 'down' | 'flat'; // 趋势方向
    label?: string;                   // 趋势标签
  };
  subMetrics?: SubMetric[];           // 子指标
}

interface SubMetric {
  label: string;
  value: number | string;
  unit?: string;
}
```

#### 5.1.4 UI/UX设计规范

```
┌─────────────────────────────────┐
│  年度销售额          ↑ 19.8%    │
│                                 │
│  ¥3,856万                       │
│                                 │
│  ─────────────────────────────  │
│  订单量 1234单  │  客单价 ¥3.1万│
└─────────────────────────────────┘
```

**样式规范**：
- 容器：`bg-white border border-[#E5E5EA] rounded-xl p-5 shadow-sm`
- 标题：`text-[14px] text-[#86868b] font-medium`
- 主数值：`text-[28px] text-[#1d1d1f] font-bold`
- 趋势上升：`text-[#34C759]`（绿色）
- 趋势下降：`text-[#FF3B30]`（红色）
- 趋势持平：`text-[#86868b]`（灰色）

#### 5.1.5 验收标准

- [ ] ✅ 正确显示KPI数值和单位
- [ ] ✅ 趋势显示正确（颜色、方向、数值）
- [ ] ✅ 子指标正确展示
- [ ] ✅ 数值格式化正确（千分位、小数位）
- [ ] ✅ 动画效果流畅

---

### 5.2 SecondaryKPICard（次级KPI卡片）

#### 5.2.1 组件信息

| 项目 | 内容 |
|------|------|
| **组件名称** | SecondaryKPICard |
| **文件位置** | `src/components/KPICard.tsx` |
| **组件类型** | `SecondaryKPICard` |
| **优先级** | P1 |
| **依赖组件** | 无 |

#### 5.2.2 功能描述

用于展示次要的KPI指标，样式相对简化，适用于指标组中。

**与PrimaryKPICard的区别**：
- 内边距更小（`p-4` vs `p-5`）
- 主数值字体更小（`text-[20px]` vs `text-[28px]`）
- 不显示子指标

#### 5.2.3 验收标准

- [ ] ✅ 样式区别于PrimaryKPICard
- [ ] ✅ 功能与PrimaryKPICard一致
- [ ] ✅ 在KPIGroup中正确排列

---

### 5.3 KPIGroup（KPI卡片组）

#### 5.3.1 组件信息

| 项目 | 内容 |
|------|------|
| **组件名称** | KPIGroup |
| **文件位置** | `src/components/KPICard.tsx` |
| **组件类型** | `kpi-group` |
| **优先级** | P1 |
| **依赖组件** | PrimaryKPICard, SecondaryKPICard |

#### 5.3.2 功能描述

用于展示多个KPI卡片的组合，支持横向排列和自动换行。

#### 5.3.3 UI/UX设计规范

```
┌──────┐ ┌──────┐ ┌──────┐
│ KPI1 │ │ KPI2 │ │ KPI3 │
└──────┘ └──────┘ └──────┘
┌──────┐ ┌──────┐
│ KPI4 │ │ KPI5 │
└──────┘ └──────┘
```

**样式规范**：
- 布局：`flex flex-wrap gap-4`
- 卡片最小宽度：`min-w-[160px]`
- 卡片最大宽度：`max-w-[240px]`
- 响应式：移动端单列，桌面端多列

#### 5.3.4 验收标准

- [ ] ✅ 多个KPI卡片正确排列
- [ ] ✅ 自动换行功能正常
- [ ] ✅ 响应式布局正确
- [ ] ✅ 间距统一

---

## 6. 图表组件

### 6.1 ChartContainer（图表容器）

#### 6.1.1 组件信息

| 项目 | 内容 |
|------|------|
| **组件名称** | ChartContainer |
| **文件位置** | `src/components/Charts.tsx` |
| **组件类型** | `ChartContainer` |
| **优先级** | P0 |
| **依赖组件** | Recharts |

#### 6.1.2 功能描述

图表容器是所有图表组件的统一容器，提供统一的样式、标题、图例等功能。

**核心功能**：
- 统一的容器样式
- 标题显示
- 图例配置
- 响应式尺寸
- 导出功能（可选）

---

### 6.2 LineChartComponent（折线图）

#### 6.2.1 组件信息

| 项目 | 内容 |
|------|------|
| **组件名称** | LineChartComponent |
| **文件位置** | `src/components/Charts.tsx` |
| **组件类型** | `line-chart` |
| **优先级** | P0 |
| **依赖组件** | ChartContainer, Recharts LineChart |

#### 6.2.2 功能描述

用于展示时间序列数据的趋势变化，支持多线条对比。

**适用场景**：
- 销售趋势分析
- 用户增长趋势
- 指标变化趋势
- 同比/环比对比

#### 6.2.3 数据结构

```typescript
interface LineChartData {
  title?: string;
  data: {
    name: string;        // X轴标签（日期、时间等）
    [key: string]: number | string; // 多条线的数据
  }[];
  lines: {
    key: string;         // 数据键名
    label: string;       // 线条标签
    color?: string;      // 线条颜色
  }[];
  xAxisLabel?: string;
  yAxisLabel?: string;
}
```

#### 6.2.4 UI/UX设计规范

```
┌─────────────────────────────────┐
│  近3个月销售额趋势               │
│                                 │
│    │                            │
│  40│     ╱───╲                  │
│  30│   ╱       ╲                │
│  20│ ╱           ╲              │
│  10│               ╲            │
│    └────────────────────────────│
│     1月  2月  3月               │
│                                 │
│  今年  ●  │  去年  ●            │
└─────────────────────────────────┘
```

**样式规范**：
- 图表高度：`h-[300px]`（桌面端），`h-[250px]`（移动端）
- 线条宽度：`2px`
- 数据点：`r={4}`
- 网格线：`stroke: #E5E5EA`
- 颜色：使用设计系统配色

#### 6.2.5 验收标准

- [ ] ✅ 折线图正确渲染
- [ ] ✅ 多线条对比功能正常
- [ ] ✅ 图例点击可显示/隐藏线条
- [ ] ✅ 数据点悬停显示详细信息
- [ ] ✅ 响应式尺寸正确
- [ ] ✅ 动画效果流畅

---

### 6.3 BarChartComponent（柱状图）

#### 6.3.1 组件信息

| 项目 | 内容 |
|------|------|
| **组件名称** | BarChartComponent |
| **文件位置** | `src/components/Charts.tsx` |
| **组件类型** | `bar-chart` |
| **优先级** | P0 |
| **依赖组件** | ChartContainer, Recharts BarChart |

#### 6.3.2 功能描述

用于展示分类数据的对比，支持横向和纵向排列。

**适用场景**：
- 地区销售额对比
- 产品销量对比
- 渠道效果对比
- 类别分布对比

#### 6.3.3 UI/UX设计规范

```
┌─────────────────────────────────┐
│  各地区销售额对比                │
│                                 │
│  华东 │███████████ 350万       │
│  华南 │████████ 280万          │
│  华北 │█████ 200万             │
│  西南 │███ 150万               │
│                                 │
└─────────────────────────────────┘
```

**样式规范**：
- 柱状宽度：`barSize={40}`（纵向），`barSize={30}`（横向）
- 间距：`categoryGap="20%"`
- 圆角：`radius={[4, 4, 0, 0]}`（顶部圆角）
- 颜色：渐变填充或纯色

#### 6.3.4 验收标准

- [ ] ✅ 柱状图正确渲染（纵向和横向）
- [ ] ✅ 多系列对比功能正常
- [ ] ✅ 数值标签显示正确
- [ ] ✅ 响应式布局正确

---

### 6.4 PieChartComponent（饼图）

#### 6.4.1 功能描述

用于展示数据的构成比例，适合展示占比关系。

**适用场景**：
- 渠道占比
- 产品占比
- 用户分布
- 收入构成

#### 6.4.2 UI/UX设计规范

```
┌─────────────────────────────────┐
│  销售渠道占比                    │
│                                 │
│      ┌─────┐                    │
│    ╱  35%  ╲                    │
│   ╱         ╲                   │
│  │    25%   │                   │
│   ╲         ╱                   │
│    ╲  40%  ╱                    │
│      └─────┘                    │
│                                 │
│  线上  ●  │  线下  ●            │
│  移动  ●  │                     │
└─────────────────────────────────┘
```

**样式规范**：
- 内半径：`innerRadius={0}`（完整饼图）或 `innerRadius={60}`（环形图）
- 外半径：`outerRadius={80}`
- 标签位置：`labelLine={false}` 或显示百分比
- 颜色：使用设计系统配色，相邻扇区颜色区分明显

---

### 6.5-6.12 其他图表组件

（由于篇幅限制，其他图表组件按照相同格式编写，包括：YearComparisonChart、ScatterChart、FunnelChart、BoxPlot、MapChart、QuadrantChart、SmartChart、GanttChart）

---

## 13. 设计系统规范

### 13.1 颜色系统

| 用途 | 颜色值 | 说明 | 使用场景 |
|------|--------|------|---------|
| **主色** | `#007AFF` | iOS蓝色 | 按钮、链接、标题 |
| **主色Hover** | `#0051D5` | 深蓝色 | 按钮悬停状态 |
| **文本主色** | `#1d1d1f` | 深灰 | 主要文本内容 |
| **文本次色** | `#86868b` | 中灰 | 次要文本、标签 |
| **文本辅助** | `#646A73` | 浅灰 | 辅助信息 |
| **边框** | `#E5E5EA` | 浅灰边框 | 卡片边框、分割线 |
| **背景** | `#F5F6F7` | 浅灰背景 | 页面背景 |
| **成功/上升** | `#34C759` | 绿色 | 正向趋势、成功状态 |
| **警告/下降** | `#FF3B30` | 红色 | 负向趋势、错误状态 |
| **警告** | `#FF9500` | 橙色 | 警告信息 |

### 13.2 字体系统

| 类型 | 大小 | 行高 | 字重 | 使用场景 |
|------|------|------|------|---------|
| **H1** | 32px | 40px | 700 | 页面主标题 |
| **H2** | 24px | 32px | 600 | 章节标题 |
| **H3** | 20px | 28px | 600 | 卡片标题 |
| **Body Large** | 17px | 24px | 400 | 正文大号 |
| **Body** | 15px | 22px | 400 | 正文 |
| **Body Small** | 13px | 18px | 400 | 辅助文本 |
| **Caption** | 12px | 16px | 400 | 说明文字 |

### 13.3 间距系统

| 间距类型 | Tailwind类 | 实际值 | 用途 |
|---------|-----------|--------|------|
| **XS** | `gap-1` | 4px | 紧密元素间距 |
| **SM** | `gap-2` | 8px | 小元素间距 |
| **MD** | `gap-3` | 12px | 中等元素间距 |
| **LG** | `gap-4` | 16px | 大元素间距 |
| **XL** | `gap-5` | 20px | 卡片内边距 |
| **2XL** | `gap-6` | 24px | 大卡片内边距 |
| **3XL** | `gap-8` | 32px | 区块间距 |

### 13.4 圆角系统

| 类型 | 值 | 使用场景 |
|------|-----|---------|
| **None** | `rounded-none` (0px) | 无圆角 |
| **SM** | `rounded-sm` (2px) | 小元素 |
| **MD** | `rounded-md` (4px) | 按钮、输入框 |
| **LG** | `rounded-lg` (8px) | 卡片 |
| **XL** | `rounded-xl` (12px) | 大卡片 |
| **2XL** | `rounded-2xl` (16px) | 消息气泡 |
| **Full** | `rounded-full` | 圆形按钮、头像 |

### 13.5 阴影系统

| 类型 | Tailwind类 | 效果 | 使用场景 |
|------|-----------|------|---------|
| **None** | `shadow-none` | 无阴影 | - |
| **SM** | `shadow-sm` | 轻微阴影 | 卡片悬浮 |
| **MD** | `shadow-md` | 中等阴影 | 弹窗、下拉菜单 |
| **LG** | `shadow-lg` | 大阴影 | 模态框 |

### 13.6 动画系统

**统一使用 Framer Motion**：

```typescript
// 标准进入动画
<motion.div
  initial={{ opacity: 0, y: 10 }}
  animate={{ opacity: 1, y: 0 }}
  transition={{ duration: 0.3, ease: "easeOut" }}
>
  {/* 内容 */}
</motion.div>

// 延迟动画（用于列表项）
{items.map((item, index) => (
  <motion.div
    key={item.id}
    initial={{ opacity: 0, y: 10 }}
    animate={{ opacity: 1, y: 0 }}
    transition={{ duration: 0.3, delay: index * 0.05 }}
  >
    {/* 内容 */}
  </motion.div>
))}
```

**动画参数**：
- 初始状态：`opacity: 0, y: 10`
- 最终状态：`opacity: 1, y: 0`
- 持续时间：`300ms`
- 缓动函数：`easeOut`
- 列表延迟：`50ms` per item

---

## 14. 技术实现规范

### 14.1 技术栈

- **框架**：React 18.3+
- **语言**：TypeScript 5.6+
- **样式**：Tailwind CSS 3.4+
- **动画**：Framer Motion 11+
- **图表**：Recharts 2.12+
- **图标**：Lucide React 0.453+
- **构建工具**：Vite 5.4+

### 14.2 代码规范

**组件结构**：
```typescript
// 1. 导入
import { ... } from '...';

// 2. 类型定义
interface ComponentProps {
  // ...
}

// 3. 组件实现
export function Component({ ... }: ComponentProps) {
  // ...
  return (
    // JSX
  );
}
```

**命名规范**：
- 组件：PascalCase
- 函数：camelCase
- 常量：UPPER_SNAKE_CASE
- 类型：PascalCase + Interface 后缀

### 14.3 性能优化

- 使用 `React.memo` 优化组件重渲染
- 使用 `useMemo` 和 `useCallback` 优化计算和函数
- 图表组件使用 `ResponsiveContainer` 实现响应式
- 列表使用虚拟滚动（如果超过100项）

### 14.4 可访问性

- 所有交互元素支持键盘导航
- 使用语义化HTML标签
- 提供适当的ARIA标签
- 支持屏幕阅读器

---

## 15. 测试验收标准

### 15.1 功能测试

- [ ] ✅ 组件渲染正确
- [ ] ✅ Props传递和接收正确
- [ ] ✅ 交互功能正常
- [ ] ✅ 边界情况处理正确
- [ ] ✅ 错误处理正确

### 15.2 UI测试

- [ ] ✅ 视觉设计符合规范
- [ ] ✅ 响应式布局正确
- [ ] ✅ 动画效果流畅
- [ ] ✅ 颜色和字体正确

### 15.3 性能测试

- [ ] ✅ 组件渲染时间 < 100ms
- [ ] ✅ 无内存泄漏
- [ ] ✅ 大量数据时性能正常

### 15.4 兼容性测试

- [ ] ✅ Chrome/Edge最新版本
- [ ] ✅ Safari最新版本
- [ ] ✅ Firefox最新版本
- [ ] ✅ 移动端浏览器（iOS Safari, Chrome Mobile）

---

## 16. 附录

### 16.1 组件清单

（完整的60+组件清单表格）

### 16.2 变更日志

| 日期 | 版本 | 变更内容 | 作者 |
|------|------|---------|------|
| 2024-12-15 | 3.0.0 | 重构为规范PRD格式 | 产品团队 |
| 2024-12-XX | 2.0.0 | 完整PRD文档，包含所有60+组件 | 产品团队 |
| 2024-12-12 | 1.0.0 | 初始PRD文档（4个核心组件） | 产品团队 |

### 16.3 参考资料

- Apple Human Interface Guidelines
- Material Design Guidelines
- Recharts Documentation
- Tailwind CSS Documentation

---

**文档结束**








